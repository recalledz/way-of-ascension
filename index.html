
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Way of Ascension ‚Äî Idle Xianxia</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="stars"></div><div class="stars2"></div>
  <header>
    <div class="brand">
      <div class="qi-orb" id="qiOrb" aria-hidden="true">
        <div class="yin-yang">
          <div class="yang"></div>
          <div class="yin"></div>
          <div class="yang-dot"></div>
          <div class="yin-dot"></div>
        </div>
      </div>
      <div>
        <h1>Way of Ascension</h1>
        <div class="sub">Idle xianxia cultivation ‚Ä¢ autosaves</div>
      </div>
    </div>
    <div class="topbar" id="top-chips">
      <div class="chip">Realm: <span id="realmName">Mortal 1</span></div>
      <div class="chip">Qi: <span id="qiVal">0</span>/<span id="qiCap">100</span></div>
      <div class="chip">Stones: <span id="stonesVal">0</span></div>
      <div class="chip">HP: <span id="hpVal">100</span>/<span id="hpMax">100</span></div>
    </div>
    <div class="right-actions">
      <button class="btn small ghost" id="saveBtn">üíæ Save</button>
      <button class="btn small ghost" id="exportBtn">‚¨áÔ∏è Export</button>
      <button class="btn small ghost" id="importBtn">‚¨ÜÔ∏è Import</button>
      <button class="btn small warn" id="resetBtn" title="Hard reset">‚ôªÔ∏è Reset</button>
    </div>
  </header>

  <main>
    <aside class="left">
      <h3 style="margin-bottom: 16px; text-align: center; color: #c7d2fe;">Activities</h3>
      
      <!-- Cultivation Selector -->
      <div class="activity-selector" id="cultivationSelector" data-activity="cultivation">
        <div class="activity-name">üßò Cultivation</div>
        <div class="activity-bar">
          <div class="activity-fill" id="cultivationFill"></div>
        </div>
        <div class="activity-info" id="cultivationInfo">Foundation Progress</div>
      </div>

      <!-- Physique Selector -->
      <div class="activity-selector" id="physiqueSelector" data-activity="physique">
        <div class="activity-name">üí™ Physique</div>
        <div class="activity-bar">
          <div class="activity-fill" id="physiqueSelectorFill"></div>
        </div>
        <div class="activity-info" id="physiqueInfo">Level 1</div>
      </div>

      <!-- Mining Selector -->
      <div class="activity-selector" id="miningSelector" data-activity="mining">
        <div class="activity-name">‚õèÔ∏è Mining</div>
        <div class="activity-bar">
          <div class="activity-fill" id="miningSelectorFill"></div>
        </div>
        <div class="activity-info" id="miningInfo">Level 1</div>
      </div>

      <!-- Adventure Selector -->
      <div class="activity-selector" id="adventureSelector" data-activity="adventure">
        <div class="activity-name">üó∫Ô∏è Adventure</div>
        <div class="activity-info" id="adventureInfo">Village Outskirts</div>
      </div>

      <!-- Sect Selector -->
      <div class="activity-selector" id="sectSelector" data-activity="sect">
        <div class="activity-name">üèõÔ∏è Sect</div>
        <div class="activity-info" id="sectInfo">0 Buildings</div>
      </div>
    </aside>

    <section class="content">
      <nav id="tabs"></nav>

      <!-- Activity Content Panels -->
      <section id="activity-cultivation" class="activity-content" style="display:none;">
        <h2>üßò Cultivation</h2>
        <div class="cards">
          <div class="card">
            <h4>Cultivation Status</h4>
            <div class="stat"><span>Current Realm</span><span id="realmNameActivity">Mortal 1</span></div>
            <div class="stat"><span>Foundation</span><span><span id="foundValActivity">0</span>/<span id="foundCapActivity">60</span></span></div>
            <div class="bar"><div class="fill" id="foundFillActivity"></div></div>
            <div class="stat"><span>Qi</span><span><span id="qiValActivity">0</span>/<span id="qiCapActivity">100</span> (+<span id="qiRegenActivity">1.0</span>/s)</span></div>
            <div class="bar"><div class="fill" id="qiFillActivity"></div></div>
            <div class="row" style="margin-top:12px">
              <button class="btn primary" id="startCultivationActivity">üßò Start Cultivating</button>
              <button class="btn warn" id="breakthroughBtnActivity">‚ö° Attempt Breakthrough</button>
            </div>
            <div class="muted" style="margin-top:8px">Foundation gain rate: <span id="foundationRate">0.0</span>/s</div>
          </div>
          
          <div class="card">
            <h4>Breakthrough Details</h4>
            <div class="stat"><span>Success Chance</span><span id="btChanceActivity">0%</span></div>
            <div class="stat"><span>Power Multiplier</span><span id="powerMultActivity">1x</span></div>
            <div id="breakthroughDetailsActivity" class="muted"></div>
            <div class="row" style="margin-top:12px">
              <button class="btn" id="useQiPillActivity">üíä Use Qi Pill</button>
              <button class="btn" id="useWardPillActivity">üíä Use Ward Pill</button>
            </div>
          </div>
        </div>
      </section>

      <section id="activity-physique" class="activity-content" style="display:none;">
        <h2> Physique Training</h2>
        <div class="cards">
          <div class="card">
            <h4>Training Status</h4>
            <div class="stat"><span>Physique Level</span><span id="physiqueLevelActivity">1</span></div>
            <div class="stat"><span>Experience</span><span><span id="physiqueExpActivity">0</span>/<span id="physiqueExpMaxActivity">100</span></span></div>
            <div class="bar"><div class="fill" id="physiqueFillActivity"></div></div>
            <div class="stat"><span>Stamina</span><span><span id="currentStamina">100</span>/<span id="maxStamina">100</span></span></div>
            <div class="bar"><div class="fill" id="staminaFill" style="background: linear-gradient(90deg, #22c55e, #16a34a);"></div></div>
            <button class="btn primary" id="startPhysiqueActivity"> Start Training</button>
          </div>
          
          <div class="card" id="activeTrainingCard" style="display:none;">
            <h4> Perfect Form Training</h4>
            <p class="muted">Hit the perfect timing zone for maximum XP. Requires stamina and skill!</p>
            
            <div class="training-interface">
              <div class="timing-bar-container">
                <div class="timing-bar" id="timingBar">
                  <div class="perfect-zone" id="perfectZone"></div>
                  <div class="timing-cursor" id="timingCursor"></div>
                </div>
              </div>
              
              <div class="training-stats">
                <div class="stat"><span>Perfect Hits</span><span id="perfectHits">0</span></div>
                <div class="stat"><span>Hit Streak</span><span id="hitStreak">0</span></div>
                <div class="stat"><span>Training Bonus</span><span id="trainingBonus">+0%</span></div>
              </div>
              
              <button class="btn primary" id="executeTraining" disabled> Execute Training (10 Stamina)</button>
              <div class="muted" style="margin-top:8px">Perfect timing: 15-25 XP | Good timing: 8-12 XP | Poor timing: 3-5 XP</div>
            </div>
          </div>
          
          <div class="card" id="passiveTrainingCard" style="display:none;">
            <h4> Passive Training</h4>
            <p class="muted">Steady, continuous training at a slower pace. No stamina required.</p>
            <div class="stat"><span>Passive Rate</span><span id="passiveTrainingRate">+2 XP/sec</span></div>
            <div class="stat"><span>Total Gained</span><span id="passiveXpGained">0 XP</span></div>
            <div class="muted" style="margin-top:8px">Passive training provides steady progress while stamina recovers</div>
          </div>
        </div>
      </section>

      <section id="activity-mining" class="activity-content" style="display:none;">
        <h2> Mining</h2>
        <div class="cards">
          <div class="card">
            <h4>Mining Status</h4>
            <div class="stat"><span>Mining Level</span><span id="miningLevelActivity">1</span></div>
            <div class="stat"><span>Experience</span><span><span id="miningExpActivity">0</span>/<span id="miningExpMaxActivity">100</span></span></div>
            <div class="bar"><div class="fill" id="miningFillActivity"></div></div>
            <div class="stat"><span>Currently Mining</span><span id="currentlyMining">Nothing</span></div>
            <button class="btn primary" id="startMiningActivity"> Start Mining</button>
          </div>
          
          <div class="card">
            <h4>Resource Selection</h4>
            <p class="muted">Select which resource to mine. Mining is passive - resources are gained automatically over time.</p>
            <div class="mining-resources" id="miningResourceSelection">
              <div class="resource-option" data-resource="stones">
                <input type="radio" name="miningResource" id="mineStones" value="stones" checked>
                <label for="mineStones">
                  <span class="resource-icon"></span>
                  <span class="resource-name">Spirit Stones</span>
                  <span class="resource-rate" id="stonesRate">+2-4/sec</span>
                </label>
              </div>
              <div class="resource-option" data-resource="iron" id="ironOption" style="display:none;">
                <input type="radio" name="miningResource" id="mineIron" value="iron">
                <label for="mineIron">
                  <span class="resource-icon"></span>
                  <span class="resource-name">Iron Ore</span>
                  <span class="resource-rate" id="ironRate">+1-2/sec</span>
                </label>
              </div>
              <div class="resource-option" data-resource="ice" id="iceOption" style="display:none;">
                <input type="radio" name="miningResource" id="mineIce" value="ice">
                <label for="mineIce">
                  <span class="resource-icon"></span>
                  <span class="resource-name">Ice Crystal</span>
                  <span class="resource-rate" id="iceRate">+0.5-1/sec</span>
                </label>
              </div>
            </div>
          </div>
          
          <div class="card" id="miningStatsCard" style="display:none;">
            <h4> Mining Progress</h4>
            <div class="stat"><span>Resources Gained</span><span id="resourcesGained">0</span></div>
            <div class="stat"><span>Mining Rate</span><span id="currentMiningRate">0/sec</span></div>
            <div class="stat"><span>Physique Bonus</span><span id="physiqueYieldBonus">+0%</span></div>
            <div class="muted" style="margin-top:8px">Mining grants experience over time</div>
          </div>
        </div>
      </section>

      <section id="activity-adventure" class="activity-content" style="display:none;">
        <h2> Adventure</h2>
        <div class="cards">
          <div class="card">
            <h4>Adventure Status</h4>
            <div class="stat"><span>Current Location</span><span id="adventureLocationActivity">Village Outskirts</span></div>
            <div class="stat"><span>Adventure Progress</span><span id="adventureProgressActivity">Ready</span></div>
            <button class="btn primary" id="startAdventureActivity"> Start Exploring</button>
          </div>
          
          <div class="card">
            <h4> Exploration</h4>
            <p class="muted">Explore the world to find resources, encounters, and new locations.</p>
            <div class="muted">Adventure system coming soon...</div>
          </div>
        </div>
      </section>

      <section id="activity-sect" class="activity-content" style="display:none;">
        <h2> Sect Management</h2>
        <div class="cards">
          <div class="card">
            <h4>Sect Overview</h4>
            <div class="stat"><span>Buildings</span><span id="buildingCountActivity">0</span></div>
            <div class="stat"><span>Spirit Stones</span><span id="stonesActivity">0</span></div>
            <button class="btn primary" id="goToSectTab"> Manage Buildings</button>
          </div>
        </div>
      </section>

      <section id="tab-cultivation">
        <div class="cards">
          <div class="card">
            <h4>Cultivation Training</h4>
            <p class="muted">Meditate to gain <strong>Foundation</strong>. Qi regenerates passively. Both must be full to attempt a breakthrough. Pills can boost success.</p>
            <div class="progress-wrap" style="margin:10px 0">
              <span class="badge">Qi</span>
              <div class="bar" style="flex:1"><div class="fill" id="qiFill2"></div></div>
              <span id="qiPct">0%</span>
            </div>
            <div class="progress-wrap" style="margin:10px 0">
              <span class="badge">Foundation</span>
              <div class="bar" style="flex:1"><div class="fill" id="foundFill2"></div></div>
              <span id="foundPct">0%</span>
            </div>
            <div class="row">
              <button class="btn" id="useQiPill"> Use Qi Pill (+25% Qi)</button>
              <button class="btn" id="useBodyPill"> Use Body Pill (+ATK/DEF boost)</button>
              <button class="btn" id="useWardPill"> Use Ward Pill (+Breakthrough chance)</button>
            </div>
            <div class="muted" style="margin-top:8px">Breakthrough chance: <span id="btChance">0</span>%</div>
          </div>

          <div class="card">
            <h4>Sect Upgrades</h4>
            <table>
              <thead><tr><th>Upgrade</th><th>Effect</th><th>Cost</th><th></th></tr></thead>
              <tbody id="upgradeTable"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="tab-laws">
        <div class="cards">
          <div class="card">
            <h4>Cultivation Laws</h4>
            <p class="muted">Choose your cultivation path after reaching Foundation stage. Each law provides unique bonuses and unlocks powerful skill trees.</p>
            <div class="stat"><span>Law Points</span><span id="lawPoints">0</span></div>
            <div class="stat"><span>Selected Law</span><span id="selectedLaw">None</span></div>
          </div>

          <div class="card">
            <h4>Available Laws</h4>
            <div id="lawSelection"></div>
          </div>

          <div class="card" id="skillTreeCard">
            <div id="skillTrees"></div>
          </div>
        </div>
      </section>

      <section id="tab-gathering">
        <div class="cards">
          <div class="card">
            <h4>Disciples</h4>
            <p class="muted">Assign disciples to gather herbs, ore, and wood. Yields scale with upgrades.</p>
            <div class="stat"><span>Total Disciples</span><span id="discTotal">1</span></div>
            <div class="stat"><span>Unassigned</span><span id="discFree">1</span></div>
          </div>
          <div class="card">
            <h4>Bamboo Grove (Herbs)</h4>
            <div class="stat"><span>Assigned</span><span id="assHerb">0</span></div>
            <div class="row">
              <button class="btn small" data-assign="herbs:+1">+1</button>
              <button class="btn small" data-assign="herbs:-1">-1</button>
            </div>
            <div class="muted">Yield: <span id="yieldHerb">0</span>/s</div>
          </div>
          <div class="card">
            <h4>Spirit Mine (Ore)</h4>
            <div class="stat"><span>Assigned</span><span id="assOre">0</span></div>
            <div class="row">
              <button class="btn small" data-assign="ore:+1">+1</button>
              <button class="btn small" data-assign="ore:-1">-1</button>
            </div>
            <div class="muted">Yield: <span id="yieldOre">0</span>/s</div>
          </div>
          <div class="card">
            <h4>Sacred Forest (Wood)</h4>
            <div class="stat"><span>Assigned</span><span id="assWood">0</span></div>
            <div class="row">
              <button class="btn small" data-assign="wood:+1">+1</button>
              <button class="btn small" data-assign="wood:-1">-1</button>
            </div>
            <div class="muted">Yield: <span id="yieldWood">0</span>/s</div>
          </div>
        </div>
      </section>

      <section id="tab-alchemy">
        <div class="cards">
          <div class="card">
            <h4>Alchemy Cauldron</h4>
            <p class="muted">Brew pills that boost cultivation and breakthroughs. Success grows with Alchemy level.</p>
            <div class="stat"><span>Level</span><span id="alchLvl">1</span></div>
            <div class="stat"><span>XP</span><span id="alchXp">0</span></div>
            <div class="row">
              <select id="recipeSelect" class="btn">
                <!-- Recipes populated dynamically based on unlock status -->
              </select>
              <button class="btn primary" id="brewBtn">üî• Brew</button>
            </div>
          </div>

          <div class="card">
            <h4>Queue</h4>
            <p class="muted">Slots: <span id="slotCount">1</span></p>
            <table>
              <thead><tr><th>Item</th><th>Progress</th><th>Status</th><th></th></tr></thead>
              <tbody id="queueTable"></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="tab-combat">
        <div class="cards">
          <div class="card">
            <h4>Spirit Beast Hunts</h4>
            <p class="muted">Hunt beasts for stones and loot. Affixes add spice.</p>
            <div class="row">
              <select id="beastSelect" class="btn"></select>
              <button class="btn primary" id="huntBtn">‚öîÔ∏è Start Hunt</button>
            </div>
            <div class="muted" id="huntStatus">No active hunt.</div>
            <div class="progress-wrap" style="margin-top:10px">
              <span class="badge">Enemy HP</span>
              <div class="bar" style="flex:1"><div class="fill" id="enemyFill"></div></div>
              <span id="enemyHpTxt">‚Äî</span>
            </div>
            <div class="progress-wrap" style="margin-top:6px">
              <span class="badge">Your HP</span>
              <div class="bar" style="flex:1"><div class="fill" id="ourFill"></div></div>
              <span id="ourHpTxt">‚Äî</span>
            </div>
            <p class="muted">Affixes: <span id="affixList">None</span></p>
            <div class="row" style="margin-top:8px">
              <button class="btn small" id="techSlash">üó°Ô∏è Sword Slash</button>
              <button class="btn small" id="techGuard">üõ°Ô∏è Guard</button>
              <button class="btn small" id="techBurst">üí• Qi Burst</button>
            </div>
            <p class="muted" id="techStatus"></p>
          </div>

          <div class="card">
            <h4>Combat Stats</h4>
            <div class="stat"><span>Your ATK</span><span id="atkVal2">5</span></div>
            <div class="stat"><span>Your DEF</span><span id="defVal2">2</span></div>
            <div class="stat"><span>Estimated Win Chance</span><span id="winEst">‚Äî</span></div>
          </div>
        </div>
      </section>

      <section id="tab-sect">
        <div class="cards">
          <div class="card">
            <h4>Sect Buildings</h4>
            <p class="muted">Construct and upgrade buildings to enhance your sect's capabilities. Buildings unlock as you advance in cultivation and provide powerful bonuses.</p>
            <div id="buildingsContainer"></div>
          </div>
        </div>
      </section>

      <div class="log" id="log"></div>
    </section>
  </main>

  <script type="module" src="game.js"></script>
</body>
</html>
